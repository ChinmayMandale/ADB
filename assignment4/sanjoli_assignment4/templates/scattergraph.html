<!--Name : Sanjoli Singh, Student ID : 1001843872, Course No : CSE-6331-001, Assignment No : 4-->
<!doctype html>
    <head>
    	<title>Earthquake Data Visualization using D3.js</title>
      <script src="https://d3js.org/d3.v4.min.js"></script>
      <style>
        .bar {
            fill: steelblue;
        }
      </style>
    </head>
    <body style="text-align: center;">
      <h1>Assignment 4</h1>
      <h2>Sanjoli Singh</h2>
      <h3>1001843872</h3>
      <h4>Scatter Plot representing Earthquake Data Distribution of Magnitude over Depth Range</h4>
      <svg width="1000" height="700"> </svg>
      <script>
        var plotData = {{ data|safe }}
        console.log(plotData)
        var margin = {top: 10, right: 30, bottom: 40, left: 60},
        width = 460 - margin.left - margin.right,
        height = 400 - margin.top - margin.bottom;

        // append the svg object to the body of the page
        var svg = d3.select("svg")
                    .attr("width", width + margin.left + margin.right)
                    .attr("height", height + margin.top + margin.bottom)
                    .append("g")
                    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
        // Add X axis
        var x = d3.scaleLinear()
                  .domain(d3.extent(plotData, function(d) { return d.depth; })) 
                  .range([ 0, width ]);
        svg.append("g")
          .attr("transform", "translate(0," + height + ")")
          .call(d3.axisBottom(x))
          .append("text")
          .attr("x", width)
          .attr("dx", "-5.1em")
          .attr("y", 35)
          .attr("text-anchor", "end")
          .attr("stroke", "black")
          .text("Depth");

        // Add Y axis
        var y = d3.scaleLinear()
                  .domain([0, d3.max(plotData, function(d) { return + d.magnitude; })])
                  .range([ height, 0]);
        svg.append("g")
          .call(d3.axisLeft(y))
          .append("text")
          .attr("transform", "rotate(-90)")
          .attr("y", 6)
          .attr("dy", "-5.1em")
          .attr("text-anchor", "end")
          .attr("stroke", "black")
          .text("Magnitude");

        // Add dots
        svg.append('g')
            .selectAll("dot")
            .data(plotData)
            .enter()
            .append("circle")
            .attr("cx", function (d) { return x(d.depth); } )
            .attr("cy", function (d) { return y(d.magnitude); } )
            .attr("r", 1.5)
            .style("fill", "#69b3a2")
      </script><br/>
      <a href="{{url_for('index')}}">Back</a>
    </body>
</html>